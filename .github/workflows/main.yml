name: Manual trigger

on:
  workflow_dispatch:

jobs:
  check-out:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4.1.1
        with: 
          sparse-checkout: |
            spec
          repository: ${{ secrets.SERVER_REPO }}
          token: ${{ secrets.PAT_TOKEN }}
      - name: Swagger Codegen CLI
        uses: CapsLock-Studio/swagger-codegen-action@74d06d53d1cdb23a7715f487361a39c8885d60f9
        with: 
          language: kotlin
          input: /github/workspace/spec/HelloAPI.json
          action: generate
      - name: Zip
        uses: TonyBogdanov/zip@1.0
        with:
            args: zip -qq -r ./HelloAPI.zip $GITHUB_WORKSPACE
